<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vertigo - Instruction Reference</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
            rel="stylesheet"
        />
        <style>
            :root {
                --primary-bg: #ffffff;
                --secondary-bg: #f8f8f8;
                --text-dark: #333333;
                --heading-dark: #343434;
                --accent-grey: #666666;
                --link-color: #555555;
                --code-bg: #f0f0f0;
                --code-text: #343434;
                --logo-brackets-color: #ffd43b;
            }

            html {
                scroll-behavior: smooth;
            }

            body {
                font-family: "Roboto", sans-serif;
                margin: 0;
                padding: 0;
                background-color: var(--primary-bg);
                color: var(--text-dark);
                line-height: 1.6;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            /* --- Top Navigation Bar --- */
            .navbar {
                background-color: var(--secondary-bg);
                padding: 15px 40px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 1px solid var(--border-light);
                position: sticky;
                top: 0;
                z-index: 1000;
            }

            .navbar .logo {
                font-family: "Roboto", sans-serif;
                font-size: 1.8em;
                font-weight: 700;
                color: var(--heading-dark);
                text-decoration: none;
                display: flex;
                align-items: center;
                height: 40px;
            }

            .navbar .logo img {
                height: 100%;
                width: auto;
            }

            /* Removed .navbar .logo::before rule */

            .navbar .nav-links {
                display: flex;
                gap: 30px;
            }

            .navbar .nav-links a {
                color: var(--text-dark);
                text-decoration: none;
                font-size: 1.05em;
                font-weight: 500;
                padding: 5px 0;
                position: relative;
                transition: color 0.2s ease-in-out;
            }

            .navbar .nav-links a:hover {
                color: var(--heading-dark);
            }

            .navbar .nav-links a.active {
                color: var(--heading-dark);
            }

            .navbar .nav-links a.active::after {
                content: "";
                position: absolute;
                width: 100%;
                height: 2px;
                background-color: var(--heading-dark);
                bottom: -5px;
                left: 0;
                border-radius: 1px;
            }

            /* --- Global Layout & Typography --- */
            .section-wrapper {
                max-width: 960px;
                margin: 0 auto;
                padding: 60px 20px;
                box-sizing: border-box;
            }

            h1,
            h2,
            h3 {
                font-family: "Roboto", sans-serif;
                color: var(--heading-dark);
                font-weight: 700;
                margin-bottom: 20px;
                line-height: 1.2;
            }

            h2 {
                font-size: 2.8em;
                margin-top: 40px;
                margin-bottom: 25px;
                position: relative;
                padding-bottom: 8px;
                border-bottom: 2px solid var(--accent-grey);
                color: var(--heading-dark);
            }

            h3 {
                font-size: 1.8em;
                color: var(--heading-dark);
                margin-top: 35px;
                margin-bottom: 15px;
                font-weight: 500;
            }

            p {
                font-size: 1.05em;
                margin-bottom: 15px;
                color: var(--text-dark);
            }

            strong,
            .highlight {
                color: var(--heading-dark);
                font-weight: 500;
            }

            a {
                color: var(--link-color);
                text-decoration: none;
                transition: color 0.2s ease-in-out;
            }

            a:hover {
                text-decoration: underline;
            }

            /* --- Specific Section Styles --- */
            .instruction-grid {
                list-style: none;
                padding: 0;
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }

            .instruction-grid li {
                background-color: var(--secondary-bg);
                padding: 20px;
                border-radius: 8px;
                border: 1px solid var(--border-light);
                transition: transform 0.2s ease;
            }

            .instruction-grid li:hover {
                transform: translateY(-3px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            }

            .instruction-grid li strong {
                display: block;
                font-family: "Consolas", "Menlo", monospace;
                font-size: 1.25em;
                color: var(--heading-dark);
                margin-bottom: 8px;
            }

            .instruction-grid li p {
                font-size: 0.95em;
                color: var(--text-dark);
                margin-bottom: 0;
            }

            footer {
                text-align: center;
                padding: 40px 20px;
                background-color: var(--secondary-bg);
                border-top: 1px solid var(--border-light);
                color: var(--text-dark);
                font-size: 0.9em;
                margin-top: 40px;
            }
        </style>
    </head>
    <body>
        <nav class="navbar">
            <a href="index.html" class="logo">
                <img src="logo.jpg" alt="Vertigo Language Logo" />
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="features.html">Features</a>
                <a href="get-started.html">Get Started</a>
                <a href="reference.html" class="active">Reference</a>
                <a href="downloads.html">Downloads</a>
            </div>
        </nav>

        <div class="section-wrapper">
            <h2>Instruction Reference</h2>
            <p>
                This section provides a comprehensive overview of all available
                instructions in Vertigo, along with their basic syntax and
                purpose. This is your go-to guide for building Vertigo programs.
            </p>

            <h3>Stack Operations</h3>
            <ul class="instruction-grid">
                <li>
                    <strong>NEW &lt;stack_name&gt;</strong>
                    <p>
                        Creates a new, empty stack identified by
                        <code>&lt;stack_name&gt;</code>.
                    </p>
                </li>
                <li>
                    <strong>&lt;stack_name&gt;</strong>
                    <p>
                        Selects the specified stack as the current active stack.
                        All subsequent stack-related operations will apply to
                        this stack.
                    </p>
                </li>
                <li>
                    <strong>PUSH &lt;value&gt;</strong>
                    <p>
                        Pushes a literal value or the content of a
                        register/immutable onto the top of the current stack.
                    </p>
                </li>
                <li>
                    <strong>POP &lt;register&gt;</strong>
                    <p>
                        Removes the top item from the current stack and places
                        its value into the specified
                        <code>&lt;register&gt;</code>.
                    </p>
                </li>
                <li>
                    <strong>DUP</strong>
                    <p>
                        Duplicates the top item of the current stack, placing a
                        copy on top.
                    </p>
                </li>
                <li>
                    <strong>DROP</strong>
                    <p>Removes (drops) the top item from the current stack.</p>
                </li>
                <li>
                    <strong>SWAP</strong>
                    <p>
                        Swaps the positions of the top two items on the current
                        stack.
                    </p>
                </li>
                <li>
                    <strong>PICK &lt;n&gt;</strong>
                    <p>
                        Duplicates the Nth item from the top of the current
                        stack (0-indexed, 0 is top), placing the copy on top.
                    </p>
                </li>
                <li>
                    <strong>PPICK &lt;n&gt;</strong>
                    <p>
                        Picks the Nth item from the stack (0-indexed), pushes a
                        copy to the top, and then removes the original Nth item.
                    </p>
                </li>
                <li>
                    <strong>CLEAR</strong>
                    <p>
                        Removes all items from the current stack, making it
                        empty.
                    </p>
                </li>
                <li>
                    <strong>ROT</strong>
                    <p>
                        Rotates the top three items on the stack: the top item
                        moves to the third position, the second to the top, and
                        the third to the second.
                    </p>
                </li>
                <li>
                    <strong>RROT</strong>
                    <p>
                        Performs a reverse rotation of the top three items on
                        the stack.
                    </p>
                </li>
            </ul>

            <h3>Data Manipulation & Registers</h3>
            <ul class="instruction-grid">
                <li>
                    <strong>REG &lt;name&gt;</strong>
                    <p>
                        Defines a new general-purpose register named
                        <code>&lt;name&gt;</code>. Registers are like variables
                        that hold a single value.
                    </p>
                </li>
                <li>
                    <strong>IM &lt;name&gt; &lt;value&gt;</strong>
                    <p>
                        Defines an immutable constant named
                        <code>&lt;name&gt;</code> with the given
                        <code>&lt;value&gt;</code>. Immutables cannot be changed
                        after definition.
                    </p>
                </li>
                <li>
                    <strong
                        >MATH &lt;op&gt; &lt;dest&gt; &lt;arg1&gt;
                        &lt;arg2&gt;</strong
                    >
                    <p>
                        Performs an arithmetic operation (<code>ADD</code>,
                        <code>MINUS</code>, <code>MUL</code>, <code>DIV</code>,
                        <code>MOD</code>, <code>POW</code>) on
                        <code>&lt;arg1&gt;</code> and <code>&lt;arg2&gt;</code>,
                        storing the result in
                        <code>&lt;dest&gt;</code> (register or
                        <code>&amp;</code> for stack).
                    </p>
                </li>
                <li>
                    <strong
                        >CONCAT &lt;dest_reg&gt; &lt;val1&gt;
                        &lt;val2&gt;</strong
                    >
                    <p>
                        Concatenates the string representations of
                        <code>&lt;val1&gt;</code> and <code>&lt;val2&gt;</code>,
                        storing the result in <code>&lt;dest_reg&gt;</code>.
                    </p>
                </li>
                <li>
                    <strong>STRLEN &lt;dest_reg&gt; &lt;string&gt;</strong>
                    <p>
                        Calculates the length of <code>&lt;string&gt;</code> and
                        stores the integer result in
                        <code>&lt;dest_reg&gt;</code>.
                    </p>
                </li>
            </ul>

            <h3>Control Flow</h3>
            <ul class="instruction-grid">
                <li>
                    <strong>POINT &lt;label&gt;</strong>
                    <p>
                        Defines a named <code>&lt;label&gt;</code> at the
                        current line, which can be used as a target for jump
                        instructions.
                    </p>
                </li>
                <li>
                    <strong>JUMP &lt;label&gt;</strong>
                    <p>
                        Unconditionally transfers program execution to the
                        instruction immediately following
                        <code>&lt;label&gt;</code>.
                    </p>
                </li>
                <li>
                    <strong>CMP &lt;operand1&gt; &lt;operand2&gt;</strong>
                    <p>
                        Compares <code>&lt;operand1&gt;</code> and
                        <code>&lt;operand2&gt;</code>, setting internal
                        comparison flags (equal, greater, less) for subsequent
                        conditional jumps.
                    </p>
                </li>
                <li>
                    <strong>STRCMP &lt;str1&gt; &lt;str2&gt;</strong>
                    <p>
                        Compares two strings, <code>&lt;str1&gt;</code> and
                        <code>&lt;str2&gt;</code>, setting comparison flags.
                    </p>
                </li>
                <li>
                    <strong>JUMPEQ &lt;label&gt;</strong>
                    <p>
                        Jumps to <code>&lt;label&gt;</code> if the 'equal' flag
                        is set from the last <code>CMP</code> or
                        <code>STRCMP</code> instruction.
                    </p>
                </li>
                <li>
                    <strong>JUMPGT &lt;label&gt;</strong>
                    <p>
                        Jumps to <code>&lt;label&gt;</code> if the 'greater'
                        flag is set.
                    </p>
                </li>
                <li>
                    <strong>JUMPLT &lt;label&gt;</strong>
                    <p>
                        Jumps to <code>&lt;label&gt;</code> if the 'less' flag
                        is set.
                    </p>
                </li>
                <li>
                    <strong>JUMPNEQ &lt;label&gt;</strong>
                    <p>
                        Jumps to <code>&lt;label&gt;</code> if the 'equal' flag
                        is NOT set.
                    </p>
                </li>
                <li>
                    <strong>LOOP</strong>
                    <p>
                        Marks the beginning of a loop block. Requires
                        <code>LTM</code> (Loop Termination Max) and
                        <code>CLI</code> (Current Loop Iteration) registers.
                    </p>
                </li>
                <li>
                    <strong>ENDLOOP</strong>
                    <p>
                        Marks the end of a loop block. If <code>CLI</code> is
                        less than or equal to <code>LTM</code>, the program
                        jumps back to the corresponding <code>LOOP</code>.
                    </p>
                </li>
            </ul>

            <h3>Subroutines & External Code</h3>
            <ul class="instruction-grid">
                <li>
                    <strong>SUB &lt;name&gt;</strong>
                    <p>
                        Begins the definition of a subroutine named
                        <code>&lt;name&gt;</code>. Code within a
                        <code>SUB</code> block is not executed until called.
                    </p>
                </li>
                <li>
                    <strong>ENDSUB</strong>
                    <p>Marks the end of a subroutine definition.</p>
                </li>
                <li>
                    <strong>CALL &lt;name&gt;</strong>
                    <p>
                        Executes the subroutine named <code>&lt;name&gt;</code>.
                        Program execution returns to the instruction following
                        the <code>CALL</code> upon subroutine completion.
                    </p>
                </li>
                <li>
                    <strong>BRING &lt;library_file&gt;</strong>
                    <p>
                        Imports subroutines defined in an external Vertigo
                        library file (e.g., <code>.vlib</code>). These libraries
                        are managed by dizzypack.
                    </p>
                </li>
                <li>
                    <strong>IMPORT &lt;module_name&gt;</strong>
                    <p>
                        Imports a Python module from the interpreter's 'libs'
                        directory, allowing access to external Python
                        functionality. These modules are installed via
                        dizzypack.
                    </p>
                </li>
            </ul>

            <h3>System & Utility</h3>
            <ul class="instruction-grid">
                <li>
                    <strong>INT &lt;interrupt_code&gt;</strong>
                    <p>
                        Triggers a system interrupt. For example,
                        <code>0x0</code> can be used for premature program exit,
                        and <code>0x1</code> for printing
                        <code>ODA</code> content when the
                        <code>intpr</code> setting is enabled.
                    </p>
                </li>
                <li>
                    <strong>IN &lt;prompt&gt;</strong>
                    <p>
                        Displays <code>&lt;prompt&gt;</code> to the user and
                        stores their input in the <code>IDA</code> (Input Data
                        Accumulator) register.
                    </p>
                </li>
                <li>
                    <strong>WAIT &lt;milliseconds&gt;</strong>
                    <p>
                        Pauses program execution for the specified number of
                        milliseconds (e.g., <code>WAIT 500</code> for half a
                        second).
                    </p>
                </li>
                <li>
                    <strong>DUMP &lt;target&gt;</strong>
                    <p>
                        Outputs debugging information. Can dump all stacks, the
                        current stack, or program logs to a file.
                    </p>
                </li>
                <li>
                    <strong
                        >OPS &lt;op&gt; &lt;dest&gt; &lt;arg1&gt;
                        [&lt;arg2&gt;...]</strong
                    >
                    <p>
                        Performs logical operations (<code>AND</code>,
                        <code>OR</code>, <code>NOT</code>, <code>EQUAL</code>,
                        <code>NEQUAL</code>) on its arguments, storing the
                        boolean result (1 or 0) in <code>&lt;dest&gt;</code>.
                    </p>
                </li>
                <li>
                    <strong>SET &lt;setting&gt; &lt;value&gt;</strong>
                    <p>
                        Adjusts internal interpreter settings (e.g.,
                        <code>SET intpr TRUE</code> to enable integer-only
                        output for <code>INT 0x1</code>).
                    </p>
                </li>
            </ul>
        </div>

        <footer>
            <p>Vertigo Language Project</p>
        </footer>
    </body>
</html>
